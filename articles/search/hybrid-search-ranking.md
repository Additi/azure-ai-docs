---
title: Hybrid search scoring (RRF)
titleSuffix: Azure Cognitive Search
description: Describes the Reciprocal Rank Fusion (RRF) algorithm used to unify search scores from parallel queries in Azure Cognitive Search.

author: yahnoosh
ms.author: jlembicz
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 09/27/2023
---

# Relevance scoring in hybrid search using Reciprocal Rank Fusion (RRF)

> [!IMPORTANT]
> Hybrid search uses the [vector features](vector-search-overview.md) currently in public preview under [supplemental terms of use](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).

For hybrid search scoring, Cognitive Search uses the Reciprocal Rank Fusion (RRF) lagorithm. RRF combines the results of different search methods, such as vector search and full text search, to produce a single relevance score. RRF is based on the concept of *reciprocal rank*, which is the inverse of the rank of the first relevant document in a list of search results. 

In Azure Cognitive Search, RRF is used whenever there are two or more queries that execute in parallel. Each query produces a ranked result set, and RRF is used to merge and homogonize the rankings into a single result set, returned in the query response.

## How RRF works

At a basic level, RRF works by taking the search results from multiple methods, assigning a reciprocal rank score to each document in the results, and then combining these scores to create a new ranking. The main idea behind this method is that documents appearing in the top positions across multiple search methods are likely to be more relevant and should be ranked higher in the combined result.

Here's a simple explanation of the RRF process:

1. Obtain search results from multiple methods. 

   In the context of Azure Cognitive Search, this is vector search and full-text search, with or without semantic ranking. We search for a specific query using both methods and get parallel ranked lists of documents as results. Each method has a ranking methodology. With BM25 ranking on full-text search, rank is by **`@search.score`**. With semantic reranking over BM25 ranked results, rank is by **`@search.rerankerScore`**. With similarity search for vector queries, the similarity score is also articulated as **`@search.score`** within its result set.

1. Assign reciprocal rank scores for result in each of the ranked lists. A new **`@search.score`** property is generated by the RFF algorithm for each match in each result set. For each document in the search results, we assign a reciprocal rank score based on its position in the list. The score is calculated as `1/(rank + k)`, where `rank` is the position of the document in the list, and `k` is a constant, which was experimentally observed to perform best if it's set to a small value like 60.

1. Combine scores. For each document, we sum the reciprocal rank scores obtained from each search system. This gives us a combined score for each document. 

1. Rank documents based on combined scores. Finally, we sort the documents based on their combined scores, and the resulting list is the fused ranking. A

Whenever results are ranked, **`@search.score`** property contains the value used to order the results. Scores are generated by ranking algorithms that vary for each method and aren't comparable.

## Search score comparison chart

The following chart identifies the scoring property returned on each match, algorithm, and range of scores for each relevance ranking algorithm. 

| Search method | Parameter | Scoring algorithm | Range |
|---------------|-----------|-------------------|-------|
| `search` in full-text search | **`@search.score`** | BM25 algorithm | Unbounded. |
| `queryType=semantic` in semantic ranking | **@search.reranker.score** | Semantic ranking | 1.00 through 4.00 |
| `vectors` in similarity search | **`@search.score`** | HNSW algorithm, plus the similarity metric specified in the configuration. | TBD | 
| `search` and `vectors` in hybrid search | **`@search.score`** | RFF algorithm | TBD |
| `search`, `vectors`, `queryType=semantic` in hybrid search with semantic reranking | **`@search.score`** | RRF score from your initial retrieval, but you'll also see the **@search.rerankerScore** which is from the reranking model powered by Bing, which ranges from 0-4. |

## Number of results in a hybrid query reponse

By default, if you aren't using pagination, the search engine returns the top 50 highest ranking matches for full text search, and it returns `k` matches for vector search. 

In a hybrid query, the top 50 highest ranked matches of the unified result set are returned. You can use `$top`, `$skip`, and `$next` for paginated results. For more information, see [How to work with search results](search-pagination-page-layout.md).

## See also

+ [How to create a hybrid query](hybrid-search-how-to-query.md)
+ [Learn more about hybrid search](hybrid-search-overview.md)
+ [Learn more about vector search](vector-search-overview.md)
