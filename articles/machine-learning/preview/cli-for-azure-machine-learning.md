---
title: Install and use the model management CLI for top Azure Machine Learning tasks
description: Learn how to install and use the model management CLI for the most common machine learning tasks in Azure Machine Learning.
services: machine-learning
author: Miguel.GonzalezFierro
ms.author: Miguel.GonzalezFierro
manager: haining
ms.reviewer: haining, mldocs, jmartens, jasonwhowell
ms.service: machine-learning
ms.workload: data-services
ms.topic: article
ms.date: 03/10/2018
---
# Install and use the model management CLI for top tasks in Azure Machine Learning

Azure Machine Learning services are an integrated, end-to-end data science and advanced analytics solution. Professional data scientists can use Azure Machine Learning services to prepare data, develop experiments, and deploy models at cloud scale. 

Azure Machine Learning provides a command-line interface (CLI) with which you can interact with your data, projects, analytics, and web services. This article presents some of the most useful CLI commands for your convenience. 

>[!NOTE]
>The CLI delivered with Azure Machine Learning services is different from the [Azure CLI](https://docs.microsoft.com/en-us/cli/azure/?view=azure-cli-latest), which is used for managing Azure resources.

![Azure Machine Learning CLI](media/cli-for-azure-machine-learning/flow.png)

## Get and start CLI

To get this CLI:
+ Download and install Azure Machine Learning Workbench:​
    + Windows - https://aka.ms/azureml-wb-msi ​
    + MacOS - https://aka.ms/azureml-wb-dmg ​​

To start the CLI:
+ From Azure Machine Learning Workbench, launch the CLI from the menu **File -> Open Command Prompt.**​

## Get command help 

Add `--debug` or `--help` to get extra info​ on the CLI commands, such as `az ml <xyz> --debug` where `<xyz>` is the command name.

For example:
```azurecli
az ml computetarget --debug ​

az ml experiment --help
```

## Common CLI tasks for Azure Machine Learning 

Here are some of the most common tasks you can perform with the CLI.

+ [Set up a compute target​](#target)
+ [Submit remote jobs](#jobs)
+ [Work with Jupyter notebooks​](#jupyter)
+ [Interact with and explore the run history](#history)
+ [Configure your environment to operationalize](#o16n)

<a name="target"></a>

### Set up a compute target​

You can compute your machine learning model in different targets, including:
+ in local mode
+ in a Data Science VM (DSVM)
+ on an HDInsight cluster

To attach a Data Science VM target:​
```azurecli
az ml computetarget attach remotedocker -n <target name> -a <ip address or FQDN> -u <username> -w <password>​
``` 

To attach an HDInsight target:​
```azurecli
az ml computetarget attach cluster -n <target name> -a <cluster name, e.g. myhdicluster-ssh.azurehdinsight.net> -u <ssh username> -w <ssh password>​
```

Within the **aml_config** folder, you can change the conda dependencies. 

Also, you can operate with PySpark, Python, or Python in a GPU DSVM. 

Define the Python operation mode as follows:
+ For Python, add `Framework:Python​` in `<target name>.runconfig` 
+ For PySpark, add `Framework:PySpark​` in `<target name>.runconfig` 
+ For Python in a GPU DSVM,
    + Add `Framework:Python​` in `<target name>.runconfig` 
    + Add `baseDockerImage: microsoft/mmlspark:plus-gpu-0.9.9 and nvidiaDocker:true​` in `<target name>.compute`

To prepare the compute target:​
```azurecli
az ml experiment prepare -c <target name>​
```

>[!TIP]
>To show your subscription​:<br/>
>`az account show​`<br/>
>To set your subscription​:<br/>
>`az account set –s "my subscription name" `​

<a name="jobs"></a>

### Submit remote jobs

To submit a job to a remote target:​
```azurecli
az ml experiment submit -c <target name> myscript.py
```

<a name="jupyter"></a>

### Work with Jupyter notebooks​

To start a Jupyter notebook:​
```azurecli
az ml notebook start​
```

This command starts a Jupyter notebook in localhost. You can work in local by selecting the kernel Python 3, or work in your remote VM by selecting the kernel `<target name>`.​

<a name="history"></a>

### Interact with and explore the run history

To list the run history:​
```azurecli
az ml history list -o table​
```

To list all completed runs:​
```azurecli
az ml history list --query "[?status=='Completed']" -o table​
```

To find runs with the best accuracy​:
```azurecli
az ml history list --query "@[?Accuracy != null] | max_by(@, &Accuracy).Accuracy"​
```
​
You can also download the files generated by each run. 

To promote a model that is saved in the folder outputs:​
```azurecli
az ml history promote -r <run id> -ap outputs/model.pkl -n <model name>​
```

To download that model:​
```azurecli
az ml asset download -l assets/model.pkl.link -d <model folder path>​
```

<a name="o16n"></a>

### Configure your environment to operationalize

To set up your operationalization environment, you must create:​

> [!div class="checklist"]
> * A resource group ​
> * A storage account​
> * An Azure Container Registry (ACR)​
> * An Application insight account​
> * A Kubernetes deployment on an Azure Container Service (ACS) cluster​


To set up a local deployment for testing in a Docker container:
```azurecli
az ml env setup -l <region, e.g. eastus2> -n <env name> -g <resource group>​
```

To set up an ACS cluster with Kubernetes​:
```azurecli
az ml env setup -l <region, e.g. eastus2> -n <env name> -g <resource group> --cluster​
```
​
To monitor the status of the deployment:
```azurecli
az ml env show -n <environment name> -g <resource group>​
```
​
To set the environment that should be used​:
```azurecli
az ml env set -n <environment name> -g <resource group>​
```

## Next steps

Get started with one of these articles: ​
+ [Install and start using Azure Machine Learning](quickstart-installation.md)
+ [Classifying Iris Data Tutorial: Part 1](tutorial-classifying-iris-part-1.md)

Dig deeper with one of these articles:
+ [CLI commands for managing models](model-management-cli-reference.md)
